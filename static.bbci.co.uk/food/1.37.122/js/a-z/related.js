glow.ready(function(){var a=glow.dom.create('<h3 class="hd"></h3><ul></ul>');var f=new glow.widgets.Mask({opacity:"0"});var c=new glow.widgets.InfoPanel(a,{className:"food-info-panel",width:300,mask:f});if(glow.env.ie<=7){$(".food-info-panel .infoPanel-pointerB").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+PAL_STATIC_HOST+"/food/"+STATIC_ASSETS_VERSION+"/css/f/bgs/info-panel-pointer-B.png', sizingMethod='crop')");$(".food-info-panel .infoPanel-pointerT").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+PAL_STATIC_HOST+"/food/"+STATIC_ASSETS_VERSION+"/css/f/bgs/info-panel-pointer-T.png', sizingMethod='crop')");$(".food-info-panel .infoPanel-pointerL").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+PAL_STATIC_HOST+"/food/"+STATIC_ASSETS_VERSION+"/css/f/bgs/info-panel-pointer-L.png', sizingMethod='crop')");$(".food-info-panel .infoPanel-pointerR").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+PAL_STATIC_HOST+"/food/"+STATIC_ASSETS_VERSION+"/css/f/bgs/info-panel-pointer-R.png', sizingMethod='crop')")}var b={};var e=null;glow.events.addListener("#foods-by-letter, #featured-foods","click",function(i){var h=glow.dom.get(i.source);if(h.is(".related-foods")){var g=(h.hasClass("ingredient"))?"ingredient":"dish";i.preventDefault();var j=h.parent().attr("id");if(b[j]){return d(h,b[j],g)}else{if(e){e.abort()}e=glow.net.get("/food/api/food/foods/"+j+"/children.json",{useCache:true,onLoad:function(k){b[j]=k;d(h,k,g)}});return}}});function d(g,l,t){var s=g.parent().attr("id");var r=g.parent().get("img").attr("alt");var k=l.json();var o=[];for(var h in k){for(var m=0;m<k[h].length;m++){var j=k[h][m];var q=(t==="ingredient")?j.isIngredient:j.isDish;if(q==="true"){o.push(j)}}}o.sort(function(u,i){return u.title.localeCompare(i.title)});c.setContext(g);c.header.get(".hd").html('Related to <a href="/food/'+s+'" class="resource-name">'+r+"</a>");var n=c.body.get("ul");n.children().destroy();var p="";for(var m=0;m<o.length&&m<14;m++){ingredientTitle=o[m].title.substr(0,1).toUpperCase()+o[m].title.substr(1);n.append(glow.dom.create('<li><a href="/food/'+o[m].id+'">'+ingredientTitle+"</a></li>"))}c.body.get(".see-all").destroy();if(o.length>14){n.after(glow.dom.create('<p class="see-all">See <a href="/food/'+s+'#related-foods">all varieties of '+r+'</a> <span class="count">('+o.length+")</span>"))}c.show()}});